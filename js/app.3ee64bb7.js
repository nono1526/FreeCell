(function(e){function t(t){for(var r,o,u=t[0],s=t[1],c=t[2],d=0,f=[];d<u.length;d++)o=u[d],a[o]&&f.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,u=1;u<n.length;u++){var s=n[u];0!==a[s]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2d48":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"card"},[r("div",{staticClass:"special__field container"},e._l(e.specialSlot,(function(t,n){return r("div",{key:n,staticClass:"card__slot",class:{slot__end:!!t.type,slot__temp:t.number===e.TEMP_SLOT},style:Object.assign({},e.getCenterMargin(n),{backgroundImage:"url(./"+t.type+"_index.png)"}),on:{dragover:function(e){e.preventDefault()},drop:function(n){return e.drop(t,e.activePoker)}}},[t.next?r("nest-card",{attrs:{card:t.next}}):e._e()],1)})),0),r("div",{staticClass:"card__fields container"},e._l(e.game,(function(t,n){return r("div",{key:n,staticClass:"card__field",style:e.getCenterMargin(n),on:{dragover:function(e){e.preventDefault()},drop:function(n){return e.drop(t,e.activePoker)}}},[r("ul",{staticClass:"card__slot"},[r("li",[t.next?r("nest-card",{attrs:{card:t.next}}):e._e()],1)])])})),0),r("div",{staticClass:"bottom container"},[r("button",{staticClass:"btn mr-20",on:{click:e.initGame}},[e._v("Reset")]),r("button",{staticClass:"btn",on:{click:e.goPrevious}},[r("img",{staticClass:"icon",attrs:{src:n("5967")}}),e._v("Previous")]),r("div",{staticClass:"time"},[r("span",{staticClass:"mr-20"},[e._v("Time: ")]),r("span",[e._v(e._s(e.time))])])])])])},i=[],o=(n("5df3"),n("1c4c"),n("75fc")),u=n("768b"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{style:e.setTransform(),attrs:{draggable:e.card.draggable()},on:{dragstart:function(t){return t.stopPropagation(),e.dragstart(t)},dragover:function(e){e.preventDefault()}}},[n("li",[n("v-card",{attrs:{number:e.card.number}}),e.card.next?n("nest-card",{attrs:{card:e.card.next}}):e._e()],1)])},c=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:{backgroundImage:"url(./cards/"+e.type+"_"+e.cardNumber+".png)",width:"92px",height:"143px",position:"relative"}},[n("div",{style:{position:"absolute",color:"white"}},[e._v(e._s(e.deep))])])},d=[],f=(n("c5f6"),["club","diamond","spade","heart"]),p={name:"v-card",props:{number:[String,Number]},computed:{type:function(){var e=Math.floor(this.number/13);return f[e]},cardNumber:function(){return this.number%13+1}}},h=p,m=n("2877"),v=Object(m["a"])(h,l,d,!1,null,null,null),b=v.exports,g={name:"nest-card",components:{VCard:b},props:{card:Object},methods:{isSequence:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.card.number%13+1,r=t?t.number%13+1:n+1;return e.next?r-n===1&&this.isSequence(e.next,e):r-n===1},dragstart:function(e){this.$store.commit("setActivePoker",this.card)},setTransform:function(){var e=this.card.deep?this.card.finish?"-143px":"-105px":0;return{marginTop:e}}}},x=g,C=(n("c3c1"),Object(m["a"])(x,s,c,!1,null,"c3467cea",null)),y=C.exports,A=5566,P=["club","diamond","spade","heart"],S={name:"app",components:{NestCard:y},data:function(){return{isWin:!1,timer:null,counter:0,game:[],specialSlot:[],TEMP_SLOT:A,gameStep:[]}},computed:{activePoker:function(){return this.$store.state.activePoker},time:function(){var e=1e3*this.counter,t=Math.floor(e/1e3/60/60);e-=1e3*t*60*60;var n=Math.floor(e/1e3/60);e-=1e3*n*60;var r=e/1e3;return"".concat(t<10?"0":"").concat(t,":").concat(n<10?"0":"").concat(n,":").concat(r<10?"0":"").concat(r)}},methods:{goPrevious:function(){if(!(this.gameStep.length<=0)){var e=this.gameStep.pop(),t=Object(u["a"])(e,2),n=t[0],r=t[1];this.drop(n,r,!0)}},getCenterMargin:function(e){return{marginRight:3===e?"75px":0}},cardToNumbers:function(e){var t=[];return e.next&&(t=this.cardToNumbers(e.next)),[e.number].concat(Object(o["a"])(t))},canLastNumberConnectUp:function(e,t){var n=Math.floor(e/13),r=Math.floor(t/13),a=e%13+1,i=t%13+1;return Math.abs(r-n)%2===1&&a-i===1||999===e},isSequence:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.number%13+1,r=t?t.number%13+1:n+1,a=r-n;return e.next?1===a&&(r-n===1&&this.isSequence(e.next,e)):1===a},drop:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.findLastCard(e),a=t.previous;if(t.finish=!1,!n){if(e.number===A)return void this.dropOnTemp(e,t);if(e.type)return void this.dropOnEnd(e,t);if(!this.isSequence(t))return;if(!this.canLastNumberConnectUp(r.number,t.number))return;this.gameStep.push([a,t])}a.next=null,r.next=t,t.previous=r,this.writeCardsDeep(t)},writeCardsDeep:function(e){e.deep=e.previous.deep+1,null!==e.next&&this.writeCardsDeep(e.next)},dropOnTemp:function(e,t){e.next||t.next||(this.gameStep.push([t.previous,t]),t.previous.next=null,t.deep=0,t.previous=e,t.draggable=function(){return!0},e.next=t)},dropOnEnd:function(e,t){var n=this;if(!t.next){var r=Math.floor(t.number/13),a=this.findLastCard(e);e.type===P[r]&&a.number+1===t.number&&(this.gameStep.push([t.previous,t]),t.previous.next=null,t.deep=a.deep+1,t.next=null,t.previous=a,t.draggable=function(){return!0},t.finish=!0,a.next=t,this.isWin=this.specialSlot.filter((function(e){return e.type})).every((function(e){var t=n.findLastCard(e);return t.number%13+1===13})),this.isWin&&window.clearInterval(this.timer))}},findLastCard:function(e){return e.next?this.findLastCard(e.next):e},makeCard:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.shift(),i={number:a,deep:r,next:null,previous:n,finish:!1},o=this;return i.draggable=function(){return o.isSequence(i)},e>r&&(i.next=this.makeCard(e,t,i,r+1)),i},initGame:function(){var e=this;this.game=[],this.counter=0,this.specialSlot=[{number:-1,deep:-1,type:"club",next:null},{number:38,deep:-1,type:"heart",next:null},{number:12,deep:-1,type:"diamond",next:null},{number:25,deep:-1,type:"spade",next:null},{number:A,next:null},{number:A,next:null},{number:A,next:null},{number:A,next:null}];for(var t=Array.from({length:52},(function(e,t){return t})),n=[],r=0;r<52;r++){var a=Math.floor((52-r)*Math.random());n.push.apply(n,Object(o["a"])(t.splice(a,1)))}for(var i=0;i<8;i++){var u=i<4?5:6,s={deep:-1,next:null,number:999};s.next=this.makeCard(u,n,s),this.game.push(s)}window.clearInterval(this.timer),this.timer=window.setInterval((function(){e.counter++}),1e3)}},mounted:function(){this.initGame()}},k=S,T=(n("7faf"),Object(m["a"])(k,a,i,!1,null,null,null)),w=T.exports,O=n("2f62");r["a"].use(O["a"]);var M=new O["a"].Store({state:{activePoker:null},mutations:{setActivePoker:function(e,t){e.activePoker=t}},actions:{}});r["a"].config.productionTip=!1,new r["a"]({store:M,render:function(e){return e(w)}}).$mount("#app")},5967:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAVCAYAAABCIB6VAAAAAXNSR0IArs4c6QAABHZJREFUOBGVlc9vVUUUx885M3Pfu319/UGhBVqCRAsSLQUENITENED4YTBGE2NMwAULd+7cl/gHmLggMS6MP2JM40ajCxtDm+BvQKEEKL5UNKWSvlJa2r4f987MOc6DvOYFBPVsZubmns+dOfM934vwP0JkSI2Pzq7TcWYPisQM/O1UdaowMDDo7sXgvQ8etC78+HGLg9IzGuh5BDoACLEIDFvxn9iF2z/0H3iz1JirGhcPmo+dPtluDB8xZN5AhYeZZbUAtChFGw3SKhVn/+jo3j45OjoaHt8Nqk8eNF648GEupuxeYTguwk+wF5C7AcycA4JnFdJzxw52r2pk6MbFvfORkUGtl6q9XmQDefzZsjslLC0mUlsFcLt4WcEIrcbQ1rK4R0P+dJ3xUHBPZZeC5qk2n8Bf7PHrTNYWy6SjatltzkbRi0JyhAjWeM9dRqgzHASnxz5qYluR+y7v2sj7WZ+TVdbZtpBsy+WEyKhOBGe9V/PkhRT5Ukq6I6vxqNbmFUQsptaeIOWHbUL7ScHt5R1fGhqMaN36tSVf3kBV3WQibctVq4xxt9ibJRC1xSjpU5FamVosZoDOe+aLCqQfBCjEnK1ir5DfzQLn7oB/HXm7TTfnN3KS9ERkUku+mLLc0hGvZ2v2AfhZ1DgHSEENeDCT0Toc+3d26oy1bjyAmYG6WLtNJFRWCBPq6vcfdEeG+r3HDiUy4+PmwuKNhdlcHD9CgEeUUaGOlEfiEfb+EiJ1IWA7CBYQ+AwLnQbPV1m80aEGzLTowE5qh9WeIOZeTOyV1hW536aXPLS0x8qrdJNGfThAHw8Cm0ssZJsrcrGUk/Peuy4Rf0rAfJbJ5OepWooT5Tp9kjbrKLsSxEA4U/a690me4kzr7OLSphYVT3rgsrNwRYx8EepYAQ83kCWtxGqbVrgdteoG0XvFM/p0fjyJRBRgnkU3CzJZwck7qpg4+25rJcFaF3WzZ8cgM6CaZjOUrnNediLhnNQ+QPICkdpPIBTKMeE8nwVECb7BSHCaGdvCcrVn/9Wy3C4NDUXxYwtrnHPrbco5Ys2oQz67m6yQNeCW0K99ANgROEVFMsZi4ihSRxUhJkn1Le/klih6NUDPLYPrHTMSdNwTu5WOuT1jdFrxqLTzHUCYpDZZzEcRVMBVgHGN0dFrWtNLAFK0zg+Sahn2bnGfA164D1z/QG0sFN7J4Gxut0u5GyIYKy9Ub7bndZRCtBlBXiaFh8Ll1lRyPvXuxMZdxz+/PHoy51bkZblBGoH1+fXrfb4TLs+pyOwCx0/FTZmFVCBPxNsQVT+zb8fa1pBmlKdi6MCauy3V8h8KHhgYcMHdCqqU9pLGQwqxL1xWJthmHHQbnDHsFfB22P0vFfITNWA9/tU2+/uPlWKffhMa4z0KbRw6r2aad/KUxqWgoBF28uWTT0/N1KG18aE1bnyx9gchqu5kwcMBfDCcuSlodxgcfDqfdT/t2PF6ufH9/wyuJQ0NDaktaxe7gnfsCb7YJMp8N13589o//fP+Bo0PQxaiZuBFAAAAAElFTkSuQmCC"},"7faf":function(e,t,n){"use strict";var r=n("8fba"),a=n.n(r);a.a},"8fba":function(e,t,n){},c3c1:function(e,t,n){"use strict";var r=n("2d48"),a=n.n(r);a.a}});
//# sourceMappingURL=app.3ee64bb7.js.map